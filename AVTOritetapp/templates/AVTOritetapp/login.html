{% extends 'AVTOritetapp/base.html' %}
{% load static %}

{% block title %}–í—Ö–æ–¥ ‚Äî AVTOritet{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'AVTOritetapp/css/login.css' %}">
<style>
    .password-wrapper {
        position: relative;
        width: 100%;
    }
    .password-wrapper input {
        width: 100%;
        padding-right: 40px;
        box-sizing: border-box;
    }
    .toggle-password {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        background: none;
        border: none;
        cursor: pointer;
        font-size: 18px;
        padding: 0;
    }
</style>
{% endblock %}

{% block content %}
<div class="login-page">
  <div class="login-container">
    <h2>–í—Ö–æ–¥ –≤ –∞–∫–∫–∞—É–Ω—Ç</h2>

    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-success">
          {{ message }}
        </div>
      {% endfor %}
    {% endif %}

    {% if form.errors %}
      <div class="alert alert-error">
        –ù–µ–≤–µ—Ä–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –ø–∞—Ä–æ–ª—å. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.
      </div>
    {% endif %}

    <form method="POST">
      {% csrf_token %}

      <div class="form-group">
        <label for="id_username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
        <input type="text" name="username" id="id_username" required>
      </div>

      <div class="form-group">
        <label for="id_password">–ü–∞—Ä–æ–ª—å</label>
        <div class="password-wrapper">
          <input type="password" name="password" id="id_password" required>
          <button type="button" class="toggle-password" onclick="togglePasswordVisibility('id_password', this)">üëÅ</button>
        </div>
      </div>

      <button type="submit" class="login-btn">–í–æ–π—Ç–∏</button>
    </form>

    <p>–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="{% url 'register' %}">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a></p>
  </div>
</div>

{% block extra_js %}
<script>
function togglePasswordVisibility(inputId, button) {
    const passwordInput = document.getElementById(inputId);
    if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        button.textContent = 'üëÅ‚Äçüó®';
    } else {
        passwordInput.type = 'password';
        button.textContent = 'üëÅ';
    }
}
</script>
{% endblock %}
{% endblock %}